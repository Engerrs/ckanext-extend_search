{% ckan_extends %}

{% block secondary_content %}
  {% resource 'ckanext-datesearch/moment.js' %}
  {% resource 'ckanext-datesearch/daterangepicker.js' %}
  {% resource 'ckanext-datesearch/daterangepicker-bs3.css' %}
  {% resource 'ckanext-datesearch/daterangepicker-module.js' %}

  {# This <section> is the date-range picker widget in the sidebar. #}
  <section class="module module-narrow module-shallow">
    <h2 class="module-heading">
      <i class="icon-medium icon-calendar"></i> {{ _('Filter by date') }}
      <a href="{{ h.remove_url_param(['ext_startdate', 'ext_enddate']) }}"
         class="action">{{ _('Clear') }}</a>
    </h2>
    <div class="module-content input-prepend" data-module="daterange-query">
      <span class="add-on"><i class="icon-calendar"></i></span>
      <input type="text" style="cursor:pointer; width: 150px" readonly id="daterange"
             data-module="daterangepicker-module" />
    </div>
  </section>

  {# This <section> is the custodian selectlist in the sidebar. #}
  <section class="module module-narrow module-shallow">
    <h2 class="module-heading">
        <i class="icon-medium icon-filter"></i>
        Custodian
      <a href="{{ h.remove_url_param(['ext_cust_id']) }}"
         class="action">{{ _('Clear') }}</a>
    </h2>
      
    <select id="cust_id" name="cust_id">
    {% for user in c.users %}
        <option value="{{user.id}}"
            {% if request.params.get('ext_cust_id')==user.id %}
                selected="selected"
            {% endif %}
                >
        {{user.name}}
        </option>
    {% endfor %}
    </select>
  </section>

  {{ super() }}
{% endblock %}
